{% extends "base.html" %}

{% block title %}Tech in Action - Lior Milliger{% endblock %}

{% block content %}
<div class="page-content">
    <h1>Tech in Action ðŸ’»</h1>
    <p>Click on a technology from the list on the left to see a sample code snippet or configuration.</p>
    
    <div class="tech-container">
        <div class="tech-list">
            <ul>
                <li class="has-submenu">
                    <span class="tech-category">CI <i class="fas fa-chevron-down"></i></span>
                    <ul class="submenu">
                        <li><a href="#" class="tech-link" data-target="jenkins">Jenkins</a></li>
                        <li><a href="#" class="tech-link" data-target="github-actions">GitHub Actions</a></li>
                    </ul>
                </li>

                <li class="has-submenu">
                    <span class="tech-category">IaC <i class="fas fa-chevron-down"></i></span>
                    <ul class="submenu">
                        <li><a href="#" class="tech-link" data-target="terraform">Terraform</a></li>
                        <li><a href="#" class="tech-link" data-target="pulumi">Pulumi</a></li>
                    </ul>
                </li>

                <li class="has-submenu">
                    <span class="tech-category">Observability <i class="fas fa-chevron-down"></i></span>
                    <ul class="submenu">
                        <li><a href="#" class="tech-link" data-target="prometheus">Prometheus</a></li>
                        <li><a href="#" class="tech-link" data-target="grafana">Grafana</a></li>
                        <li><a href="#" class="tech-link" data-target="kibana">Kibana</a></li>
                    </ul>
                </li>

                <li><a href="#" class="tech-link active" data-target="aws">AWS</a></li>
                <li><a href="#" class="tech-link" data-target="docker">Docker</a></li>
                <li><a href="#" class="tech-link" data-target="kubernetes">Kubernetes & Helm</a></li>
                <li><a href="#" class="tech-link" data-target="argocd">ArgoCD</a></li>
                <li><a href="#" class="tech-link" data-target="logging">Logging</a></li>
            </ul>
        </div>

        <div class="tech-display">
            <div id="aws" class="tech-content-panel">
              <h3>AWS CLI Command</h3>
              <pre><code># List all S3 buckets in your account
aws s3 ls

# Create a new EC2 instance
aws ec2 run-instances \
    --image-id ami-0c55b159cbfafe1f0 \
    --count 1 \
    --instance-type t2.micro \
    --key-name MyKeyPair</code></pre>
            </div>

            <div id="jenkins" class="tech-content-panel" style="display: none;">
                <h3>Jenkinsfile (Declarative Pipeline)</h3>
                <pre><code>pipeline {
    agent any
    stages {
        stage('Build') { steps { sh 'npm install' } }
        stage('Test') { steps { sh 'npm test' } }
        stage('Deploy') { steps { echo 'Deploying...' } }
    }
}</code></pre>
            </div>
            <div id="github-actions" class="tech-content-panel" style="display: none;">
                <h3>GitHub Actions Workflow (.yml)</h3>
                <pre><code>name: CI Pipeline
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Run a one-line script
      run: echo Hello, world!</code></pre>
            </div>
            <div id="terraform" class="tech-content-panel" style="display: none;">
                <h3>Terraform (main.tf)</h3>
                <pre><code>provider "aws" {
  region = "us-east-1"
}

resource "aws_s3_bucket" "b" {
  bucket = "my-tf-test-bucket"
}</code></pre>
            </div>
            <div id="pulumi" class="tech-content-panel" style="display: none;">
                <h3>Pulumi (index.ts)</h3>
                <pre><code>import * as aws from "@pulumi/aws";

// Create an AWS resource (S3 Bucket)
const bucket = new aws.s3.Bucket("my-bucket", {
    acl: "private",
});

// Export the name of the bucket
export const bucketName = bucket.id;
</code></pre>
            </div>
            <div id="docker" class="tech-content-panel" style="display: none;">
              <h3>Dockerfile</h3>
              <pre><code>FROM python:3.8-slim-buster
WORKDIR /app
COPY . /app
RUN pip install -r requirements.txt
EXPOSE 80
CMD ["python", "app.py"]</code></pre>
            </div>
            <div id="kubernetes" class="tech-content-panel" style="display: none;">
                <h3>Kubernetes Deployment (deployment.yaml)</h3>
                <pre><code>apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.14.2
        ports:
        - containerPort: 80</code></pre>
            </div>
            <div id="argocd" class="tech-content-panel" style="display: none;">
              <h3>ArgoCD Application Manifest</h3>
              <pre><code>apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: my-app
  namespace: argocd
spec:
  project: default
  source:
    repoURL: 'https://github.com/my-org/my-app.git'
    path: helm-chart
  destination:
    server: 'https://kubernetes.default.svc'</code></pre>
            </div>
            <div id="prometheus" class="tech-content-panel" style="display: none;">
              <h3>Prometheus Scrape Config (prometheus.yml)</h3>
              <pre><code>scrape_configs:
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']</code></pre>
            </div>
            <div id="grafana" class="tech-content-panel" style="display: none;">
              <h3>Grafana (PromQL Query)</h3>
              <p>Grafana is a visualization tool. Here is a sample query to show CPU usage:</p>
              <pre><code>100 - (avg by (instance) (rate(node_cpu_seconds_total{mode="idle"}[5m])) * 100)</code></pre>
            </div>
            <div id="logging" class="tech-content-panel" style="display: none;">
              <h3>Structured Logging (JSON Format)</h3>
              <pre><code>{
  "timestamp": "2025-09-17T10:00:00Z",
  "level": "INFO",
  "message": "User login successful",
  "service": "auth-service"
}</code></pre>
            </div>
            <div id="kibana" class="tech-content-panel" style="display: none;">
              <h3>Kibana (KQL Query)</h3>
              <p>Kibana is a visualization layer for Elasticsearch. You use KQL to filter logs.</p>
              <pre><code>service: "auth-service" and level: "ERROR"</code></pre>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const techLinks = document.querySelectorAll('.tech-link');
        const contentPanels = document.querySelectorAll('.tech-content-panel');
        const categories = document.querySelectorAll('.tech-category');

        // --- Logic for Toggling Content Panels (Right Side) ---
        techLinks.forEach(link => {
            link.addEventListener('click', function(event) {
                event.preventDefault();
                const targetId = this.getAttribute('data-target');
                
                contentPanels.forEach(panel => panel.style.display = 'none');
                techLinks.forEach(l => l.classList.remove('active'));
                
                const targetPanel = document.getElementById(targetId);
                if (targetPanel) {
                    targetPanel.style.display = 'block';
                }
                this.classList.add('active');
            });
        });

        // --- NEW: Logic for Expanding/Collapsing Sub-menus ---
        categories.forEach(category => {
            category.addEventListener('click', function() {
                // Toggle a class on the category itself for styling (e.g., rotating the icon)
                this.classList.toggle('open');
                
                // Find the next element, which is the <ul> submenu
                const submenu = this.nextElementSibling;
                if (submenu && submenu.classList.contains('submenu')) {
                    // Toggle its visibility
                    if (submenu.style.display === "block") {
                        submenu.style.display = "none";
                    } else {
                        submenu.style.display = "block";
                    }
                }
            });
        });
    });
</script>
{% endblock %}

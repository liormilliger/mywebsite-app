{% extends "base.html" %}

{% block title %}Tech in Action - Lior Milliger{% endblock %}

{% block content %}

<style>
    /* Style for the technology icons */
    .tech-icon {
        width: 40px;  /* Set a fixed width */
        height: 40px; /* Set a fixed height */
        object-fit: contain; /* Ensures the icon fits without distortion */
        margin: 8px;
        padding: 5px;
        border-radius: 5px; /* Slightly rounded corners */
        background-color: #f8f9fa; /* Light background for contrast */
        border: 1px solid #dee2e6; /* Subtle border */
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        vertical-align: middle; /* Aligns icons with any text links */
    }

    /* Animate icon on hover */
    .tech-icon:hover {
        transform: scale(1.1);
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    /* Style for the 'active' icon or link */
    .tech-link.active .tech-icon {
        border-color: #007bff; /* Highlight color for the selected icon */
        background-color: #e7f3ff;
    }

    .tech-link.active {
        font-weight: bold;
    }

    /* Adjust submenu display to be a flex row for icons */
    .tech-list .submenu {
        display: none; /* Hidden by default, JS will toggle it */
        flex-wrap: wrap;
        justify-content: center; /* Center icons within the submenu */
        padding-left: 0;
        list-style: none;
    }
    
    /* Override for the JS 'display: block' to make it 'display: flex' */
    .tech-list .submenu[style*="block"] {
        display: flex !important;
        align-items: center;
    }
</style>

<div class="page-content">
    <h1>Tech in Action ðŸ’»</h1>
    <p>Click on a technology from the list on the left to see a sample code snippet or configuration.</p>
    
    <div class="tech-container">
        <div class="tech-list">
            <ul>
                <li class="has-submenu">
                    <span class="tech-category">CI <i class="fas fa-chevron-down"></i></span>
                    <ul class="submenu">
                        <li>
                            <a href="#" class="tech-link" data-target="jenkins" title="Jenkins">
                                <img src="{{ url_for('static', filename='images/tech/Jenkins.png') }}" alt="Jenkins Logo" class="tech-icon">
                            </a>
                        </li>
                        <li>
                            <a href="#" class="tech-link" data-target="github-actions">GitHub Actions</a>
                        </li>
                    </ul>
                </li>

                <li class="has-submenu">
                    <span class="tech-category">IaC <i class="fas fa-chevron-down"></i></span>
                    <ul class="submenu">
                        <li>
                            <a href="#" class="tech-link" data-target="terraform" title="Terraform">
                                <img src="{{ url_for('static', filename='images/tech/terraform.svg') }}" alt="Terraform Logo" class="tech-icon">
                            </a>
                        </li>
                        <li>
                            <a href="#" class="tech-link" data-target="pulumi" title="Pulumi">
                                <img src="{{ url_for('static', filename='images/tech/Pulumi.svg') }}" alt="Pulumi Logo" class="tech-icon">
                            </a>
                        </li>
                    </ul>
                </li>
                
                <li class="has-submenu">
                    <span class="tech-category">Observability <i class="fas fa-chevron-down"></i></span>
                    <ul class="submenu">
                        <li>
                            <a href="#" class="tech-link" data-target="prometheus" title="Prometheus">
                                <img src="{{ url_for('static', filename='images/tech/Prometheus.svg.png') }}" alt="Prometheus Logo" class="tech-icon">
                            </a>
                        </li>
                        <li>
                            <a href="#" class="tech-link" data-target="grafana" title="Grafana">
                                <img src="{{ url_for('static', filename='images/tech/Grafana.svg.png') }}" alt="Grafana Logo" class="tech-icon">
                            </a>
                        </li>
                        <li>
                             <a href="#" class="tech-link" data-target="kibana">Kibana</a>
                        </li>
                    </ul>
                </li>

                <li>
                    <a href="#" class="tech-link active" data-target="aws" title="AWS">
                        <img src="{{ url_for('static', filename='images/tech/AWS.svg.png') }}" alt="AWS Logo" class="tech-icon">
                    </a>
                </li>
                <li>
                    <a href="#" class="tech-link" data-target="docker" title="Docker">
                        <img src="{{ url_for('static', filename='images/tech/docker.png') }}" alt="Docker Logo" class="tech-icon">
                    </a>
                </li>
                <li>
                    <a href="#" class="tech-link" data-target="kubernetes" title="Kubernetes & Helm">
                        <img src="{{ url_for('static', filename='images/tech/Kubernetes.svg.png') }}" alt="Kubernetes Logo" class="tech-icon">
                    </a>
                </li>
                <li>
                    <a href="#" class="tech-link" data-target="argocd" title="ArgoCD">
                        <img src="{{ url_for('static', filename='images/tech/argocd.webp') }}" alt="ArgoCD Logo" class="tech-icon">
                    </a>
                </li>
                <li>
                    <a href="#" class="tech-link" data-target="logging">Logging</a>
                </li>
            </ul>
        </div>

        <div class="tech-display">
            <div id="aws" class="tech-content-panel">
              <h3>AWS CLI Command</h3>
              <pre><code># List all S3 buckets in your account
aws s3 ls

# Create a new EC2 instance
aws ec2 run-instances \
    --image-id ami-0c55b159cbfafe1f0 \
    --count 1 \
    --instance-type t2.micro \
    --key-name MyKeyPair</code></pre>
            </div>

            <div id="jenkins" class="tech-content-panel" style="display: none;">
                <h3>Jenkinsfile (Declarative Pipeline)</h3>
                <pre><code>pipeline {
    agent any
    stages {
        stage('Build') { steps { sh 'npm install' } }
        stage('Test') { steps { sh 'npm test' } }
        stage('Deploy') { steps { echo 'Deploying...' } }
    }
}</code></pre>
            </div>
            <div id="github-actions" class="tech-content-panel" style="display: none;">
                <h3>GitHub Actions Workflow (.yml)</h3>
                <pre><code>name: CI Pipeline
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Run a one-line script
      run: echo Hello, world!</code></pre>
            </div>
            <div id="terraform" class="tech-content-panel" style="display: none;">
                <h3>Terraform (main.tf)</h3>
                <pre><code>provider "aws" {
  region = "us-east-1"
}

resource "aws_s3_bucket" "b" {
  bucket = "my-tf-test-bucket"
}</code></pre>
            </div>
            <div id="pulumi" class="tech-content-panel" style="display: none;">
                <h3>Pulumi (index.ts)</h3>
                <pre><code>import * as aws from "@pulumi/aws";

// Create an AWS resource (S3 Bucket)
const bucket = new aws.s3.Bucket("my-bucket", {
    acl: "private",
});

// Export the name of the bucket
export const bucketName = bucket.id;
</code></pre>
            </div>
            <div id="docker" class="tech-content-panel" style="display: none;">
              <h3>Dockerfile</h3>
              <pre><code>FROM python:3.8-slim-buster
WORKDIR /app
COPY . /app
RUN pip install -r requirements.txt
EXPOSE 80
CMD ["python", "app.py"]</code></pre>
            </div>
            <div id="kubernetes" class="tech-content-panel" style="display: none;">
                <h3>Kubernetes Deployment (deployment.yaml)</h3>
                <pre><code>apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.14.2
        ports:
        - containerPort: 80</code></pre>
            </div>
            <div id="argocd" class="tech-content-panel" style="display: none;">
              <h3>ArgoCD Application Manifest</h3>
              <pre><code>apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: my-app
  namespace: argocd
spec:
  project: default
  source:
    repoURL: 'https://github.com/my-org/my-app.git'
    path: helm-chart
  destination:
    server: 'https://kubernetes.default.svc'</code></pre>
            </div>
            <div id="prometheus" class="tech-content-panel" style="display: none;">
              <h3>Prometheus Scrape Config (prometheus.yml)</h3>
              <pre><code>scrape_configs:
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']</code></pre>
            </div>
            <div id="grafana" class="tech-content-panel" style="display: none;">
              <h3>Grafana (PromQL Query)</h3>
              <p>Grafana is a visualization tool. Here is a sample query to show CPU usage:</p>
              <pre><code>100 - (avg by (instance) (rate(node_cpu_seconds_total{mode="idle"}[5m])) * 100)</code></pre>
            </div>
            <div id="logging" class="tech-content-panel" style="display: none;">
              <h3>Structured Logging (JSON Format)</h3>
              <pre><code>{
  "timestamp": "2025-09-17T10:00:00Z",
  "level": "INFO",
  "message": "User login successful",
  "service": "auth-service"
}</code></pre>
            </div>
            <div id="kibana" class="tech-content-panel" style="display: none;">
              <h3>Kibana (KQL Query)</h3>
              <p>Kibana is a visualization layer for Elasticsearch. You use KQL to filter logs.</p>
              <pre><code>service: "auth-service" and level: "ERROR"</code></pre>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const techLinks = document.querySelectorAll('.tech-link');
        const contentPanels = document.querySelectorAll('.tech-content-panel');
        const categories = document.querySelectorAll('.tech-category');

        // --- Logic for Toggling Content Panels (Right Side) ---
        techLinks.forEach(link => {
            link.addEventListener('click', function(event) {
                event.preventDefault();
                const targetId = this.getAttribute('data-target');
                
                contentPanels.forEach(panel => panel.style.display = 'none');
                techLinks.forEach(l => l.classList.remove('active'));
                
                const targetPanel = document.getElementById(targetId);
                if (targetPanel) {
                    targetPanel.style.display = 'block';
                }
                this.classList.add('active');
            });
        });

        // --- Logic for Expanding/Collapsing Sub-menus ---
        categories.forEach(category => {
            category.addEventListener('click', function() {
                // Toggle a class on the category itself for styling (e.g., rotating the icon)
                this.classList.toggle('open');
                
                // Find the next element, which is the <ul> submenu
                const submenu = this.nextElementSibling;
                if (submenu && submenu.classList.contains('submenu')) {
                    // Toggle its visibility
                    if (submenu.style.display === "block" || submenu.style.display === "flex") {
                        submenu.style.display = "none";
                    } else {
                        submenu.style.display = "block"; // The CSS will force this to flex
                    }
                }
            });
        });
    });
</script>
{% endblock %}